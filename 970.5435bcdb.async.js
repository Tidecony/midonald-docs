"use strict";(self.webpackChunkmidonald=self.webpackChunkmidonald||[]).push([[970,649],{91970:function(ca,ve,m){m.r(ve),m.d(ve,{CheckboxGroupWithAll:function(){return na},DivideAreaTitle:function(){return ze},Download:function(){return Ma},DragTreeTable:function(){return an},DynamicTable:function(){return ma},LinkClick:function(){return ba},ListPage:function(){return rn},ListQueryForm:function(){return Na},MembershipTag:function(){return Vn},SearchInput:function(){return vn},SelectInput:function(){return $e},SelectWithFilter:function(){return ea},TagSelect:function(){return hn},UploadExcel:function(){return bn},downloadTemplate:function(){return qe}});var Wn=m(999),va=m(57213),S=m.n(va),Ke=m(94935),h=m(50959),n=m(11527),fa=function(e){var r=e.title,u=e.style,d=e.noLine,g=d===void 0?!1:d,o=e.subTitle,i=o===void 0?!1:o;return(0,n.jsxs)(n.Fragment,{children:[i?(0,n.jsxs)("div",{style:S()({position:"relative",height:32,marginBottom:16,paddingLeft:8,borderRadius:4,fontSize:14,lineHeight:"32px",fontWeight:"bold",color:"#222",backgroundColor:"#f6f6f6"},u),children:[(0,n.jsx)("div",{style:{position:"absolute",left:0,top:8,width:4,height:16,borderRadius:"5px 0px 5px 0px",backgroundColor:"#ffbc0d"}}),r]}):(0,n.jsx)("div",{style:S()({fontWeight:"bold",color:"#101010",fontSize:"16px"},u),children:r}),g?null:(0,n.jsx)(Ke.Z,{style:{margin:"16px 0",color:"#f1f1f1"}})]})},ze=fa,ga=m(93525),fe=m.n(ga),pa=m(54306),U=m.n(pa),Q=m(72002),$=m(40352),ge=m(43026),ha=function(e,r){var u=e.overMax,d=e.overMaxTxt,g=e.columns,o=e.addText,i=e.disabled,t=i===void 0?!1:i,s=e.addType,b=s===void 0?"long":s,y=e.tableOpt,p=y===void 0?{}:y,F=e.dataSource,c=F===void 0?[]:F,l=e.expandNode,R=l===void 0?null:l,O=e.onAdd,D=(0,h.useState)([]),N=U()(D,2),x=N[0],V=N[1],L=(0,h.useState)(0),j=U()(L,2),a=j[0],T=j[1];(0,h.useEffect)(function(){V(c.map(function(I,f){return I.key=f,I})),T(c.length)},[c]);var P=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(u&&x.length>=u){Q.Z.warning("\u8D85\u51FA\u6700\u5927\u53EF\u521B\u5EFA\u6570\u91CF");return}V(function(C){return[].concat(fe()(C),[S()({key:a},f)])}),T(a+1)},w=function(f){V(function(C){return C.filter(function(A,k){return k!==f})})};(0,h.useImperativeHandle)(r,function(){return{getTableData:function(){return x},handleAddRow:P,handleDeleteRow:w}});var Z=function(){return P()};return(0,n.jsxs)(n.Fragment,{children:[b==="button"?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{type:"primary",onClick:O||Z,disabled:t,style:{marginBottom:16},children:o!=null?o:"+\u65B0\u589E"}),R]}):null,b==="link"?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{type:"link",onClick:O||Z,disabled:t,style:{marginBottom:16},children:o!=null?o:"+\u65B0\u589E"}),R]}):null,(0,n.jsx)(ge.Z,S()({columns:g,dataSource:x,pagination:!1},p)),b==="long"?(0,n.jsx)($.Z,{block:!0,type:"primary",disabled:t,onClick:O||Z,style:{marginTop:16},children:o!=null?o:"+\u65B0\u589E"}):null]})},ma=h.forwardRef(ha),ya=m(79226),Gn=m(53649),Sa=function(e){var r=e.type,u=r===void 0?"link":r,d=e.classList,g=d===void 0?"":d,o=e.popconfirmProps,i=e.children,t=e.onClick,s=function(y){typeof t=="function"&&t(y)};return(0,n.jsxs)(n.Fragment,{children:[u==="popConfirm"&&(0,n.jsx)(ya.Z,S()(S()({placement:"leftBottom",title:"\u662F\u5426\u786E\u8BA4\u64CD\u4F5C\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onConfirm:s,getPopupContainer:function(){return document.body}},o),{},{children:(0,n.jsx)("span",{role:"link",tabIndex:0,className:"link-span-click ".concat(g),children:i!=null?i:"/"})})),u==="link"&&(0,n.jsx)("span",{role:"link",tabIndex:0,className:"link-span-click ".concat(g),onClick:s,children:i!=null?i:"/"})]})},ba=Sa,xa=m(5013),Ta=m(10213),de=m(99059),ye=m(96420),Se=m(44222),Ca=m(29716),ue=m(22382),pe=m(17373),Da=m(19639),ja=m(21911),Ia=Ca.Z.RangePicker,Oa=ue.Z.TextArea,Fa=function(e){return(0,n.jsx)(ue.Z,S()({placeholder:"\u8BF7\u8F93\u5165",allowClear:!0},e))},Ra=function(e){return(0,n.jsx)(Oa,S()({rows:1,allowClear:!0,placeholder:"\u8BF7\u8F93\u5165"},e))},Pa=function(e){return(0,n.jsx)(pe.Z,S()({allowClear:!0,style:{width:"100%"},getPopupContainer:function(u){return u.parentNode},placeholder:"\u8BF7\u9009\u62E9"},e))},wa=function(e){return(0,n.jsx)(Da.Z,S()({placeholder:"\u8BF7\u9009\u62E9",getPopupContainer:function(u){return u.parentNode}},e))},La=function(e){return(0,n.jsx)(Ia,S()({allowClear:!0},e))},ka=function(e){return(0,n.jsx)(ja.Z,S()({changeOnSelect:!0,showSearch:!0,expandTrigger:"hover",showCheckedStrategy:"SHOW_PARENT",placeholder:"\u8BF7\u9009\u62E9"},e))},he={Input:Fa,TextArea:Ra,Select:Pa,ProDictSelect:wa,RangePicker:La,Cascader:ka},Be=h.forwardRef(function(v,e){var r=v.className,u=r===void 0?"":r,d=v.style,g=v.queryBtnText,o=v.resetBtnText,i=v.showFilterText,t=v.hideFilterText,s=v.formItems,b=v.noHide,y=v.type,p=y===void 0?"query":y,F=v.onSearch,c=(0,h.useState)(!1),l=U()(c,2),R=l[0],O=l[1],D=(0,h.useRef)(null);(0,h.useImperativeHandle)(e,function(){return{formRef:D.current,getFormData:function(){var j;return((j=D.current)===null||j===void 0?void 0:j.getFieldsValue())||[]},getFormValue:function(j){var a;return(a=D.current)===null||a===void 0?void 0:a.getFieldValue(j)},restForm:function(){var j;return(j=D.current)===null||j===void 0?void 0:j.resetFields()},setFormValue:function(j,a){var T;return(T=D.current)===null||T===void 0?void 0:T.setFieldValue(j,a)},setFormValues:function(j){var a;return(a=D.current)===null||a===void 0?void 0:a.setFieldsValue(j)}}});var N=function(j){F&&F(j)},x=function(){O(!R)},V=function(j){return j==null?void 0:j.map(function(a,T){var P,w,Z,I,f;return a.type==="title"?(0,n.jsx)(de.Z,{span:12,children:(0,n.jsx)(ze,{title:a.title,subTitle:!0,noLine:!0})},T):(0,n.jsx)(de.Z,{span:(P=a.span)!==null&&P!==void 0?P:3,children:a.type==="slot"?((w=a.render)===null||w===void 0?void 0:w.call(a))||((Z=he[a.component])===null||Z===void 0?void 0:Z.call(he,a.componentProps)):(0,n.jsx)(ye.Z.Item,S()(S()({labelCol:{span:6},label:a.label,name:a.name},a.props),{},{children:((I=a.render)===null||I===void 0?void 0:I.call(a))||((f=he[a.component])===null||f===void 0?void 0:f.call(he,a.componentProps))}))},T)})};return(0,n.jsxs)(ye.Z,{ref:D,name:"basic",className:"midonald-search-form ".concat(u),style:d,onFinish:N,size:"middle",layout:"vertical",children:[p==="query"&&(0,n.jsx)("div",{className:"midonald-search-area",children:(0,n.jsxs)(Se.Z,{gutter:32,children:[V(s.showItems),R&&!b?V(s.hideItems):null,(0,n.jsxs)(de.Z,{span:12,children:[(0,n.jsx)($.Z,{type:"primary",htmlType:"submit",children:g!=null?g:"\u67E5\u8BE2"}),(0,n.jsx)($.Z,{onClick:function(){var j;(j=D.current)===null||j===void 0||j.resetFields()},children:o!=null?o:"\u91CD\u7F6E"}),!b&&(0,n.jsxs)($.Z,{type:"link",size:"small",onClick:x,children:[R?"".concat(t!=null?t:"\u9690\u85CF\u67E5\u8BE2\u6761\u4EF6"):"".concat(i!=null?i:"\u5168\u90E8\u67E5\u8BE2\u6761\u4EF6"),R?(0,n.jsx)(xa.Z,{}):(0,n.jsx)(Ta.Z,{})]})]})]})}),p==="other"&&(0,n.jsx)(Se.Z,{gutter:32,children:V(s.showItems)})]})}),Na=Be,Za=m(25359),X=m.n(Za),Va=m(49811),se=m.n(Va),Aa=m(12342),ee=m.n(Aa),_=m(60776),be=m(70218),xe=m(86438),Ea=["success","failure","requestParams","baseUrl","btnText","btnSize","disabled","downloadType"],Ua=function(e){var r=e.success,u=e.failure,d=e.requestParams,g=e.baseUrl,o=g===void 0?"":g,i=e.btnText,t=i===void 0?"\u4E0B\u8F7D":i,s=e.btnSize,b=s===void 0?"small":s,y=e.disabled,p=y===void 0?!1:y,F=e.downloadType,c=F===void 0?"label":F,l=ee()(e,Ea),R=(0,xe.$)(),O=R.t,D=function(){var x=se()(X()().mark(function V(){return X()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(o){j.next=3;break}return Q.Z.warn(O("cp_url_empty")),j.abrupt("return");case 3:be.Z.get(o,S()(S()({},d),{},{headers:S()({"Cache-Control":"no-cache","McD-Page-Route":window.location.pathname,Authorization:_.LP===null||_.LP===void 0?void 0:(0,_.LP)()},d==null?void 0:d.headers),responseType:"blob"})).then(function(a){if(typeof r=="function"){r(a);return}var T=a.data;if(Object.prototype.toString.call(T||{})==="[object Blob]"){var P=new FileReader;P.readAsDataURL(T),P.onload=function(){var Z,I,f,C,A,k=document.createElement("a"),B=(Z=a.headers["content-disposition"])===null||Z===void 0||(I=Z.match)===null||I===void 0||(f=I.call(Z,/(filename=(.*))/))===null||f===void 0?void 0:f[2];if(!B)if((T==null?void 0:T.type)==="application/vnd.ms-excel")B="tempalte.xlsx";else{Q.Z.warning(localStorage.getItem("locale")==="cn"?"\u6587\u4EF6\u540D\u4E0D\u5B58\u5728":"File name does not exist");return}k.download=decodeURI((C=B)===null||C===void 0||(A=C.replace)===null||A===void 0?void 0:A.call(C,/^"|"$/g,"")),k.href=P==null?void 0:P.result,k.click(),k.remove()}}else if(parseInt(T==null?void 0:T.code)!==2e3&&(T==null?void 0:T.code)!=="SUCCESS"){var w;Q.Z===null||Q.Z===void 0||Q.Z.error((w=T==null?void 0:T.msg)!==null&&w!==void 0?w:T==null?void 0:T.message)}}).catch(function(a){var T;if(typeof u=="function"){u(a);return}Q.Z===null||Q.Z===void 0||Q.Z.error((T=a==null?void 0:a.msg)!==null&&T!==void 0?T:a==null?void 0:a.message)});case 4:case"end":return j.stop()}},V)}));return function(){return x.apply(this,arguments)}}(),N=S()(S()({},l),{},{size:b,disabled:!o||p,onClick:c==="label"?void 0:D});return(0,n.jsx)(n.Fragment,{children:["label","blob"].includes(c)?(0,n.jsx)($.Z,S()(S()({},N),{},{children:c==="label"?(0,n.jsx)("a",{download:"",href:"".concat(o,"?authorization=").concat(_.LP===null||_.LP===void 0?void 0:(0,_.LP)()),children:t}):t})):null})},Ma=(0,h.memo)(Ua),Ka=m(52510),le=m.n(Ka),za=m(85899),We=m.n(za),Ba=m(60464),Wa=m(4690),Ge="DraggableBodyRow",Hn={didDrop:"didDrop",hover:"hover",drop:"drop"},Qn={group:"group",child:"child"},Ga=function(e,r,u,d,g){var o,i,t,s,b,y,p=function F(c){for(var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,R=0;R<c.length;R++){var O=c[R];O[r]===u&&(o=O,t=R,b=l),O[r]===d&&(i=O,s=R,y=l);var D=O[g]||[];(D==null?void 0:D.length)>0&&F(D,O)}return{dragRow:o,dropRow:i,dragIndex:t,dropIndex:s,dragParent:b,dropParent:y}};return p(e)},Ha=m(32475),Qa=m(94033),Ja=m(98314),Ya=m(18625),$a=function(e){var r=(0,Ya.f)(function(i){return{item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging()}}),u=r.isDragging,d=r.initialOffset,g=r.currentOffset;if(!u)return null;function o(i,t){if(!i||!t)return{display:"none"};var s=t.x,b=t.y,y="translate(".concat(s,"px, ").concat(b,"px)");return{display:"table-row",position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%",transform:y}}return(0,n.jsx)("tr",{style:o(d,g),children:e.children})},Xa=$a,qa=["record","index","className","style","moveRow","idKey","parentKey","canDrag","childrenDrag","parentValue","showPreview"],_a=(0,h.memo)(function(v){var e;if(!v.moveRow)return(0,n.jsx)("tr",{});var r=v.record,u=v.index,d=v.className,g=v.style,o=v.moveRow,i=v.idKey,t=v.parentKey,s=v.canDrag,b=v.childrenDrag,y=v.parentValue,p=v.showPreview,F=ee()(v,qa);if(!r)return null;var c=(e={},le()(e,i,r==null?void 0:r[i]),le()(e,"parentId",r==null?void 0:r[t]),le()(e,"index",u),e),l=(0,h.useRef)(null),R=(0,Ha.L)({accept:Ge,collect:function(I){var f=I.getItem()||{},C=f[i],A=f.parentId,k=f.index;if(C===r[i])return{};var B=I.isOver();return A!=r[t]&&(B=!1),{isOver:B,dropClassName:k<u?" drop-over-downward":" drop-over-upward",handlerId:I.getHandlerId()}},drop:function(I){if(x){var f={dragId:I[i],dropId:r[i]};o(f)}}}),O=U()(R,2),D=O[0],N=D.handlerId,x=D.isOver,V=D.dropClassName,L=O[1],j=(0,Qa.c)({type:Ge,item:c,collect:function(I){return{isDragging:I.isDragging()}},canDrag:function(){return c.parentId&&c.parentId!=y&&!b?!1:s}}),a=U()(j,3),T=a[0].isDragging,P=a[1],w=a[2];return(0,h.useEffect)(function(){L(P(l.current)),w((0,Ja.r)(),{captureDraggingState:!0})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("tr",S()({ref:l,className:"".concat(d).concat(x?V:""),style:S()({},g),"data-handler-id":N},F)),T&&p&&(0,n.jsx)(Xa,{children:F.children})]})}),en=function(e){var r=(0,h.useState)(e.tableData||[]),u=U()(r,2),d=u[0],g=u[1],o={body:d.length>0?{row:_a}:{}},i=e.idKey||"id",t=e.parentKey||"parentId",s=e.childrenKey||"children",b=e.parentValue||null,y=e.canDrag!==void 0?e.canDrag:!0,p=e.childrenDrag!==void 0?e.childrenDrag:!0;(0,h.useEffect)(function(){g(e.tableData)},[e.tableData]);var F=(0,h.useCallback)(function(c){var l=c.dragId,R=c.dropId,O=Ga(d,i,l,R,s),D=O.dragRow,N=O.dropRow,x=O.dragIndex,V=O.dropIndex,L=O.dragParent,j=!D||!D[t]||D[t]===b,a;if(j)a=We()(d,{$splice:[[x,1],[V,0,D]]}),e.changeSort({data:a,dragRow:D,dropRow:N});else if(D&&N&&D[t]===N[t]&&p){a=We()(L,le()({},s,{$splice:[[x,1],[V,0,D]]}));var T=function w(Z,I){return Z.map(function(f){if(f[i]===I[i])return a;var C=f[s]||[];return C.length>0?S()(S()({},f),{},le()({},s,w(C,I))):f})},P=T(d,L);e.changeSort({data:P,dragRow:D,dropRow:N,afterParent:a})}},[d]);return(0,n.jsx)("div",{className:"drag-tree-table",children:(0,n.jsx)(Ba.W,{backend:Wa.PD,children:(0,n.jsx)(ge.Z,S()(S()({},e.tableOptions),{},{dataSource:d,components:o,pagination:!1,childrenColumnName:s,onRow:function(l,R){var O={record:l,index:R,idKey:i,parentKey:t,childrenDrag:p,parentValue:b,canDrag:y,showPreview:e.showPreview,moveRow:F};return O}}))})})},an=en,Te=m(2223);function He(v){var e,r=(0,Te.Jt)(Te.gT.PARAMETERS);if(r){var u=r.find(function(d){return d.parameterKey===v});e=u&&u.parameterValue}return e}function nn(){return He("portal.pagesize")>0?He("portal.pagesize"):50}var tn=["dataKeys","totalKeys","getDataApi","callback","formatParamsFn","listQueryFormOptions","tableOptions"];function Qe(v,e){return e.reduce(function(r,u){return r&&r[u]?r[u]:void 0},v)}var Je=1,Ye=nn(),ln=(0,h.forwardRef)(function(v,e){var r,u,d=v.dataKeys,g=v.totalKeys,o=v.getDataApi,i=v.callback,t=v.formatParamsFn,s=v.listQueryFormOptions,b=v.tableOptions,y=b===void 0?{}:b,p=ee()(v,tn),F=(0,h.useState)(!1),c=U()(F,2),l=c[0],R=c[1],O=(0,h.useState)([]),D=U()(O,2),N=D[0],x=D[1],V=(0,h.useState)(0),L=U()(V,2),j=L[0],a=L[1],T=(0,h.useState)(Je),P=U()(T,2),w=P[0],Z=P[1],I=(0,h.useState)(Ye),f=U()(I,2),C=f[0],A=f[1],k=(0,h.useRef)(null),B=(0,xe.$)(),E=B.t,M=function(z){var Y=z;t&&(Y=t(z)),o&&(R(!0),o(S()({pageNum:w,pageSize:C},Y)).then(function(ae){x(Qe(ae,d)),g&&a(Qe(ae,g)),i==null||i(ae)}).finally(function(){R(!1)}))};(0,h.useEffect)(function(){M({pageNum:w,pageSize:C})},[]);var K=function(z){Z(1),M(S()({pageNum:1},z))},G=function(){var z=k.current.getFormData();M(S()({pageNum:1,pageSize:C},z))},H=function(z,Y){Z(z!=null?z:Je),A(Y!=null?Y:Ye);var ae=k.current.getFormData();M(S()({pageNum:z,pageSize:Y},ae))};return(0,h.useImperativeHandle)(e,function(){return{handlePageChange:H,refreshList:G}}),(0,n.jsxs)("div",{className:"pcm-table-container",children:[(0,n.jsx)(Be,S()({ref:k,onSearch:K},s)),(0,n.jsxs)("div",{className:"pcm-table-top-wrap",children:[((r=y==null||(u=y.allFilterColumns)===null||u===void 0?void 0:u.length)!==null&&r!==void 0?r:0)>0?(0,n.jsx)("div",{className:"pcm-table-absolute-buttons",children:p.children}):p.children,(0,n.jsx)(ge.Z,S()({dataSource:N,pagination:{total:j,current:w,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showTotal:function(z){return"".concat(E("product_msg_inTotal")," ").concat(z," ").concat(E("product_make_a_record"))}},loading:l,scroll:{x:"100%"},onChange:function(z){return H(z.current,z.pageSize)}},y))]})]})}),rn=ln,on=m(84875),dn=m.n(on),un=function(e){var r,u=e.onKeyUp,d=e.onChange,g=e.inputStyle,o=e.selectStyle,i=e.placeholder,t=e.options,s=t===void 0?[]:t,b=e.className,y=b===void 0?"":b,p=e.place,F=p===void 0?"before":p,c=(0,h.useState)((r=s[0])===null||r===void 0?void 0:r.value),l=U()(c,2),R=l[0],O=l[1],D=(0,h.useState)(""),N=U()(D,2),x=N[0],V=N[1];(0,h.useEffect)(function(){d&&d({selectVal:R,inputVal:x})},[]);var L=function(P){O(P),d&&d({selectVal:P,inputVal:x})},j=function(P){V(P),d&&d({selectVal:R,inputVal:P})},a=function(){return(0,n.jsx)(pe.Z,{style:o,value:R,onChange:function(w){return L(w)},options:s})};return(0,n.jsxs)(ue.Z.Group,{compact:!0,style:{width:"auto"},className:dn()("midonald-select-input",y),children:[F==="before"&&a(),(0,n.jsx)(ue.Z,{placeholder:i||"\u8BF7\u8F93\u5165",allowClear:!0,onChange:function(P){return j(P.target.value)},style:S()({},g),onKeyUp:function(P){return P.keyCode===13&&u&&u({selectVal:R,inputVal:x})}}),F==="after"&&a()]})},$e=un,sn=["btnText","inputStyle","hasSelect","onSearch"],cn=function(e){var r=e.btnText,u=r===void 0?"\u67E5\u8BE2":r,d=e.inputStyle,g=e.hasSelect,o=e.onSearch,i=ee()(e,sn),t=(0,h.useState)(""),s=U()(t,2),b=s[0],y=s[1],p=function(){o(b)},F=function(l){l.keyCode===13&&p()};return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[g?(0,n.jsx)($e,S()({onChange:function(l){var R=l.selectVal,O=l.inputVal;y({selectVal:R,inputVal:O})},onKeyUp:function(l){var R=l.selectVal,O=l.inputVal;o({selectVal:R,inputVal:O})},inputStyle:S()({marginRight:16},d)},i)):(0,n.jsx)(ue.Z,{style:S()({marginRight:16},d),allowClear:!0,onKeyUp:F,onChange:function(l){return y(l.target.value)},placeholder:"\u8BF7\u8F93\u5165"}),(0,n.jsx)($.Z,{type:"primary",htmlType:"submit",onClick:p,children:u})]})},vn=cn,fn=m(54689),Ce=m.n(fn),De=m(10422),gn=["value","newLabelTip","options","getData","setTagValue","placeholder","notFoundContent"],pn=function(e){var r,u=e.value,d=e.newLabelTip,g=d===void 0?"\u65B0\u6807\u7B7E":d,o=e.options,i=o===void 0?[]:o,t=e.getData,s=t===void 0?function(){return[]}:t,b=e.setTagValue,y=b===void 0?function(){}:b,p=e.placeholder,F=p===void 0?"\u6761\u4EF6tag":p,c=e.notFoundContent,l=c===void 0?"\u65E0\u5339\u914D\u6807\u7B7E":c,R=ee()(e,gn),O=(0,h.useState)(""),D=U()(O,2),N=D[0],x=D[1],V=(0,h.useState)(!1),L=U()(V,2),j=L[0],a=L[1],T=(0,h.useState)([]),P=U()(T,2),w=P[0],Z=P[1],I=(0,h.useMemo)(function(){return se()(X()().mark(function f(){var C;return X()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(Array.isArray(i)&&i!==null&&i!==void 0&&i.length)){k.next=3;break}return Z(fe()(i)),k.abrupt("return");case 3:typeof s=="function"&&Z((C=s())!==null&&C!==void 0?C:[]);case 4:case"end":return k.stop()}},f)}))},[]);return(0,h.useEffect)(function(){I()},[I]),(0,n.jsx)(pe.Z,S()({allowClear:!0,showSearch:!0,open:j,style:{width:"30%"},value:u,placeholder:F,onInputKeyDown:function(C){var A=C.target.value;C.keyCode===13&&A&&N&&(0,De.unstable_batchedUpdates)(function(){y(A),x(""),a(!1)})},onSearch:function(C){if(!C||C===u){x("");return}if(!(w!=null&&w.length)){x(C);return}var A=!1,k=Ce()(w),B;try{for(k.s();!(B=k.n()).done;){var E=B.value;if(C===E){A=!0;break}}}catch(M){k.e(M)}finally{k.f()}x(A?"":C)},onChange:function(C){y(C),x("")},notFoundContent:!N&&!(w!=null&&w.length)?null:l,dropdownRender:function(C){return(0,n.jsxs)(n.Fragment,{children:[C,N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ke.Z,{style:{margin:"8px 0"}}),(0,n.jsx)("div",{style:{width:"100%",padding:"0 8px 4px"},role:"link",onClick:function(){(0,De.unstable_batchedUpdates)(function(){y(N),x(""),a(!1)})},children:"".concat(N,"(").concat(g,")")})]}):null]})},options:w==null||(r=w.map)===null||r===void 0?void 0:r.call(w,function(f){var C,A;return{label:(C=f==null?void 0:f.label)!==null&&C!==void 0?C:f,value:(A=f==null?void 0:f.value)!==null&&A!==void 0?A:f}}),onDropdownVisibleChange:function(C){(0,De.unstable_batchedUpdates)(function(){x(""),a(C)})},getPopupContainer:function(C){return C.parentElement}},R))},hn=pn,mn=m(9769),Xe=m(49294),yn=m(26024),qe=function(e){be.Z.post(e,{},{responseType:"blob",headers:{Authorization:(0,_.LP)(),"Content-Type":"application/json","Cache-Control":"no-cache"}}).then(function(r){if(r.data==0){var u;Q.Z.warning((u=$t("product_lbl_cannot_exported"))!==null&&u!==void 0?u:"\u6570\u636E\u4E3A\u7A7A\uFF0C\u4E0D\u80FD\u5BFC\u51FA")}else{var d=new Blob([r.data],{type:"application/vnd.ms-excel"}),g=r.headers["content-disposition"],o=g?g.match(/(filename=(.*))/):null,i=o&&o[2]?decodeURI(o[2]):"default.xls";if("download"in document.createElement("a")){var t=document.createElement("a");t.download=i,t.style.display="none",t.href=URL.createObjectURL(d),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}else navigator.msSaveBlob&&navigator.msSaveBlob(d,i)}})},Sn=function(e){var r=e.btnText,u=e.okText,d=e.closeText,g=e.modalTitle,o=e.errModalTit,i=e.supportTypeTxt,t=e.templateTxt,s=e.fileBtnTxt,b=e.modelType,y=b===void 0?"pcm":b,p=e.errorContent,F=e.templateMethod,c=e.templateURL,l=e.errListField,R=e.uploadURL,O=e.btnType,D=O===void 0?"default":O,N=e.paramField,x=e.frontSlot,V=e.endSlot,L=e.width,j=L===void 0?373:L,a=e.className,T=e.errTableOpt,P=e.errColumns,w=e.errType,Z=w===void 0?"tips":w,I=e.onSuccess,f=e.onIllegal,C=e.onError,A=e.fileSize,k=A===void 0?100:A,B=(0,xe.$)(),E=B.t,M=(0,h.useState)(!1),K=U()(M,2),G=K[0],H=K[1],J=(0,h.useState)(!1),z=U()(J,2),Y=z[0],ae=z[1],An=(0,h.useState)([]),ta=U()(An,2),ne=ta[0],re=ta[1],En=(0,h.useState)([]),la=U()(En,2),ra=la[0],oe=la[1],Un=(0,h.useState)(!1),ia=U()(Un,2),oa=ia[0],ce=ia[1],Mn=(0,h.useState)(!1),da=U()(Mn,2),Kn=da[0],ua=da[1],Ie=function(){ae(!1),re([]),oe([]),ce(!1)},sa=function(){ua(!1),re([]),oe([]),ce(!1)},zn={onRemove:function(q){var te=ne.indexOf(q),W=ne.slice();W.splice(te,1),re(W)},beforeUpload:function(q){if(!(q.size/1024/1024<k)){var te;Q.Z.warning("".concat((te=E("product_msg_select_file_Cannot_More_Than"))!==null&&te!==void 0?te:"\u6587\u4EF6\u4E0D\u80FD\u8D85\u8FC7").concat(k,"M"));return}if(q.name.split(".").pop()!=="xls"&&q.name.split(".").pop()!=="xlsx")return Q.Z.warning(i!=null?i:E("product_lbl_file_format_xlsx_xls")),!1;if(ne.length===0)re([].concat(fe()(ne),[q])),oe([]),ce(!1);else{var W;Q.Z.warning((W=E("product_lbl_one_file_uploaded"))!==null&&W!==void 0?W:"\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6"),re(fe()(ne)),oe([]),ce(!1)}return!1}},Bn=function(){if(ra.length&&oe([]),ne.length===0){var q;Q.Z.warning((q=E("product_lbl_select_file_imported"))!==null&&q!==void 0?q:"\u8BF7\u9009\u62E9\u5BFC\u5165\u6587\u4EF6");return}var te=new FormData;ne.forEach(function(W){te.append(N||"files",W)}),H(!0),be.Z.post(R,te,{headers:{Authorization:(0,_.LP)()}}).then(function(W){if(re([]),H(!1),W.data.code==="SUCCESS"){var Oe,Fe,Re,Pe,we;if(l&&((Oe=W.data)===null||Oe===void 0||(Fe=Oe.data)===null||Fe===void 0||(Re=Fe[l])===null||Re===void 0?void 0:Re.length)>0||!l&&((Pe=W.data)===null||Pe===void 0||(we=Pe.data)===null||we===void 0?void 0:we.length)>0){var Le,ke,Ne,Ze,Ve;if(console.log("response.data.data",(Le=W.data)===null||Le===void 0||(ke=Le.data)===null||ke===void 0?void 0:ke.length),Z==="modal"){var Ae,Ee,Ue;ua(!0),oe(l?(Ae=W.data)===null||Ae===void 0||(Ee=Ae.data)===null||Ee===void 0?void 0:Ee[l]:(Ue=W.data)===null||Ue===void 0?void 0:Ue.data)}else ce(!0);f==null||f(l?(Ne=W.data)===null||Ne===void 0||(Ze=Ne.data)===null||Ze===void 0?void 0:Ze[l]:(Ve=W.data)===null||Ve===void 0?void 0:Ve.data)}else{if(I)I(W.data);else{var Me;Q.Z.success((Me=E("product_msg_import_Success"))!==null&&Me!==void 0?Me:"\u5BFC\u5165\u6210\u529F")}Ie()}}else C==null||C(W.data.msg)}).catch(function(){re([]),H(!1)})};return(0,n.jsxs)("div",{style:{display:"inline-block"},children:[(0,n.jsx)($.Z,{size:"middle",type:D,onClick:function(){ae(!0)},children:r}),(0,n.jsxs)(Xe.Z,{width:j,className:"midonald-import-modal "+a,destroyOnClose:!0,maskClosable:!1,title:g,onCancel:Ie,open:Y,footer:[(0,n.jsx)($.Z,{type:"primary",loading:G,onClick:function(){return Bn()},children:u!=null?u:E("product_btn_import")},"submit"),(0,n.jsx)($.Z,{onClick:Ie,children:d!=null?d:E("product_btn_close")},"back")],children:[x,y==="pcm"?(0,n.jsxs)("p",{className:"upload-tips-info-new",children:[(0,n.jsx)("span",{className:"upload-format",children:i!=null?i:E("product_lbl_file_format_xlsx_xls")}),c&&F==="POST"&&(0,n.jsx)("a",{onClick:function(){qe(c)},children:t!=null?t:E("product_lbl_downloadtemplate")}),c&&F!=="POST"&&(0,n.jsx)("a",{href:"".concat(c,"?token=").concat((0,_.LP)()),children:t!=null?t:E("product_lbl_downloadtemplate")})]}):null,(0,n.jsx)(yn.Z,S()(S()({className:"upload-key-package-row required-tip",style:{marginBottom:oa?"8px":"20px"}},zn),{},{fileList:ne,accept:".xls, .xlsx",children:(0,n.jsx)($.Z,{icon:(0,n.jsx)(mn.Z,{}),children:s!=null?s:E("product_lbl_select_file")})})),V,oa?(0,n.jsx)("div",{className:"illega-tips-style-box",children:(0,n.jsx)(Se.Z,{children:(0,n.jsx)(de.Z,{span:12,children:(0,n.jsx)("ul",{className:"illega-tips-style",children:p})})})}):""]}),(0,n.jsx)(Xe.Z,{width:700,zIndex:1002,destroyOnClose:!0,maskClosable:!1,title:o!=null?o:E("cp_import_failed"),open:Kn,onCancel:sa,footer:[(0,n.jsx)($.Z,{style:{marginTop:"36px"},onClick:sa,children:d!=null?d:E("product_btn_close")},"back")],className:"import-modal",children:(0,n.jsx)(ge.Z,S()({dataSource:ra,columns:P,pagination:!1},T))})]})},bn=Sn,xn=m(10741),_e=function(){var v=se()(X()().mark(function e(){var r,u,d,g,o,i,t,s,b,y,p=arguments;return X()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(g=p.length>0&&p[0]!==void 0?p[0]:"",o=p.length>1?p[1]:void 0,i=p.length>2?p[2]:void 0,t=p.length>3?p[3]:void 0,!(!g||typeof g!="string")){c.next=7;break}return o==null||o([]),c.abrupt("return");case 7:if(s=(0,Te.Jt)("DICTIONARYLIST")||{},!(Object.prototype.toString.call(s)!=="[object Object]"||!((r=Object.keys(s))!==null&&r!==void 0&&r.length))){c.next=27;break}return c.prev=9,c.next=12,(0,xn.RC)("DICTIONARYLIST",t);case 12:if(c.t1=b=c.sent,c.t0=c.t1!==null,!c.t0){c.next=16;break}c.t0=b!==void 0;case 16:if(!c.t0){c.next=20;break}c.t2=b,c.next=21;break;case 20:c.t2={};case 21:s=c.t2,c.next=27;break;case 24:c.prev=24,c.t3=c.catch(9),s={};case 27:y=(u=(d=s)===null||d===void 0?void 0:d[g])!==null&&u!==void 0?u:[],Array.isArray(i)&&i.length&&(y=y.concat(i)),o==null||o(y);case 30:case"end":return c.stop()}},e,null,[[9,24]])}));return function(){return v.apply(this,arguments)}}(),Tn=function(e,r,u){var d,g;if(e){var o=(d=r==null?void 0:r.label)!==null&&d!==void 0?d:localStorage.getItem("locale")==="cn"?"dictLabelCn":"dictLabelEn",i=(g=r==null?void 0:r.value)!==null&&g!==void 0?g:"dictValue",t=S()(S()({},e),{},{value:typeof(e==null?void 0:e[i])!="string"||!u||isNaN(parseFloat(e==null?void 0:e[i]))?e[i]:parseFloat(e[i]),label:e==null?void 0:e[o]});return t}},me=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=[],t=Ce()(e),s;try{for(t.s();!(s=t.n()).done;){var b,y=s.value;if(y){var p=y==null?void 0:y[(b=g==null?void 0:g.value)!==null&&b!==void 0?b:"dictValue"];if(Array.isArray(u)&&u.length){if(!u.includes(p))continue}else if(Array.isArray(d)&&d.includes(p))continue;var F=Tn(y,g,o);F&&i.push(F)}}}catch(c){t.e(c)}finally{t.f()}r==null||r(i)},Cn=["multiple","siteCode","type","fieldNames","dictOptions","extraOptions","filterOption","excludedOptions","includedOptions","disabled","getPopupContainer","stringToNum"],Dn=function(e,r){var u=e.multiple,d=e.siteCode,g=e.type,o=g===void 0?"":g,i=e.fieldNames,t=e.dictOptions,s=e.extraOptions,b=e.filterOption,y=e.excludedOptions,p=e.includedOptions,F=e.disabled,c=F===void 0?!1:F,l=e.getPopupContainer,R=e.stringToNum,O=R===void 0?!1:R,D=ee()(e,Cn),N=(0,h.useState)([]),x=U()(N,2),V=x[0],L=x[1],j=(0,h.useState)([]),a=U()(j,2),T=a[0],P=a[1],w=function(I,f){var C,A=(C=f==null?void 0:f.value)!==null&&C!==void 0?C:"";typeof(f==null?void 0:f.value)=="number"&&(A="".concat(A));var k=!1;if(typeof A=="string"){var B,E,M;k=(B=(E=A)===null||E===void 0||(M=E.includes)===null||M===void 0?void 0:M.call(E,I))!==null&&B!==void 0?B:!1}if(typeof(f==null?void 0:f.label)=="string"){var K,G,H;k=k||((K=f==null||(G=f.label)===null||G===void 0||(H=G.includes)===null||H===void 0?void 0:H.call(G,I))!==null&&K!==void 0?K:!1)}return k};return(0,h.useEffect)(function(){!(t!=null&&t.length)&&!o&&(P([]),L([]))},[t,o]),(0,h.useEffect)(function(){t!=null&&t.length&&(P([]),me(t,L,p,y,i,O))},[t,O,y,p,i]),(0,h.useEffect)(function(){t!=null&&t.length||_e(o,P,s,d)},[o,s]),(0,h.useEffect)(function(){!(t!=null&&t.length)&&o&&me(T,L,p,y,i,O)},[T,O,y,p,i]),(0,n.jsx)(pe.Z,S()(S()({ref:r},D),{},{allowClear:!0,showSearch:!0,disabled:c,mode:u?"multiple":void 0,options:V,filterOption:b||w,getPopupContainer:l||function(Z){return Z.parentElement}}))},jn=(0,h.forwardRef)(Dn),ea=jn,aa=m(90090),In=["type","allText","siteCode","onChange","className","fieldNames","dictOptions","defaultValue","extraOptions","excludedOptions","includedOptions","disabled","stringToNum"],On=aa.Z.Group,Fn=function(e,r){var u=e.type,d=e.allText,g=e.siteCode,o=e.onChange,i=e.className,t=e.fieldNames,s=e.dictOptions,b=e.defaultValue,y=e.extraOptions,p=e.excludedOptions,F=e.includedOptions,c=e.disabled,l=c===void 0?!1:c,R=e.stringToNum,O=R===void 0?!1:R,D=ee()(e,In),N=(0,h.useState)([]),x=U()(N,2),V=x[0],L=x[1],j=(0,h.useState)(!1),a=U()(j,2),T=a[0],P=a[1],w=(0,h.useState)([]),Z=U()(w,2),I=Z[0],f=Z[1],C=(0,h.useState)((D==null?void 0:D.value)||b||[]),A=U()(C,2),k=A[0],B=A[1],E=function(K){"value"in D||B(K),o==null||o(K)};return(0,h.useEffect)(function(){"value"in D&&B(D.value||[])},[D.value]),(0,h.useEffect)(function(){!(s!=null&&s.length)&&!u?(L([]),f([]),P(!0)):P(!1)},[s,u]),(0,h.useEffect)(function(){if(s!=null&&s.length){var M,K;L([]);var G=(M=s==null||(K=s.map)===null||K===void 0?void 0:K.call(s,function(H){if(typeof H=="string"||typeof H=="number"){var J,z,Y;return Y={},le()(Y,(J=t==null?void 0:t.label)!==null&&J!==void 0?J:"label",H),le()(Y,(z=t==null?void 0:t.value)!==null&&z!==void 0?z:"value",H),Y}return H}))!==null&&M!==void 0?M:[];me(G,f,F,p,t,O)}},[s,O,p,F,t]),(0,h.useEffect)(function(){s!=null&&s.length||_e(u,L,y,g)},[u,y,g]),(0,h.useEffect)(function(){!(s!=null&&s.length)&&u&&me(V,f,F,p,t,O)},[V,O,p,F,t]),(0,n.jsxs)("div",S()(S()({},i?{className:i}:{}),{},{ref:r,children:[d?(0,n.jsx)(aa.Z,{disabled:T||!!l,onChange:function(K){var G,H=K.target.checked?I==null||(G=I.map)===null||G===void 0?void 0:G.call(I,function(J){return J==null?void 0:J.value}):[];E==null||E(H)},style:{marginRight:16},className:"checkbox-with-all",indeterminate:(k==null?void 0:k.length)>0&&(k==null?void 0:k.length)<(I==null?void 0:I.length),checked:!!(I!=null&&I.length)&&(k==null?void 0:k.length)===(I==null?void 0:I.length),children:d}):null,(0,n.jsx)(On,{value:k,options:I,disabled:!!l,onChange:function(K){return E==null?void 0:E(K)},className:"checkboxgroup-with-all"})]}))},Rn=h.forwardRef(Fn),na=Rn,Pn=function(e,r,u){var d=null;switch(e){case"select":d=(0,n.jsx)(ea,S()(S()({},r!=null?r:{}),{},{ref:u}));break;case"checkbox":d=(0,n.jsx)(na,S()(S()({},r!=null?r:{}),{},{ref:u}));break;default:d=null;break}return d},wn=m(43411),Ln={CUSTOMER:"/api/inner/customer"};function kn(v){return(0,wn.U2)("/customer/manager/membershipTag/query/",v,Ln.CUSTOMER)}var je=function(){var v=se()(X()().mark(function e(){var r,u,d,g,o,i,t,s,b,y,p,F=arguments;return X()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=F.length>0&&F[0]!==void 0?F[0]:{transform:!1},u={},d=[],g=r.type,o=r.transform,l.prev=4,l.next=7,kn({type:g});case 7:if(l.t2=t=l.sent,l.t1=l.t2===null,l.t1){l.next=11;break}l.t1=t===void 0;case 11:if(!l.t1){l.next=15;break}l.t3=void 0,l.next=16;break;case 15:l.t3=t.data;case 16:if(l.t4=i=l.t3,l.t0=l.t4!==null,!l.t0){l.next=20;break}l.t0=i!==void 0;case 20:if(!l.t0){l.next=24;break}l.t5=i,l.next=25;break;case 24:l.t5=[];case 25:d=l.t5,l.next=31;break;case 28:l.prev=28,l.t6=l.catch(4),d=[];case 31:if(u.data=d,!o){l.next=53;break}s={},b=Ce()(d),l.prev=35,b.s();case 37:if((y=b.n()).done){l.next=44;break}if(p=y.value,!(!p||!(p!=null&&p.code)||s!=null&&s[p.code])){l.next=41;break}return l.abrupt("continue",42);case 41:s[p.code]=p==null?void 0:p.name;case 42:l.next=37;break;case 44:l.next=49;break;case 46:l.prev=46,l.t7=l.catch(35),b.e(l.t7);case 49:return l.prev=49,b.f(),l.finish(49);case 52:u.codeName=s;case 53:return l.abrupt("return",u);case 54:case"end":return l.stop()}},e,null,[[4,28],[35,46,49,52]])}));return function(){return v.apply(this,arguments)}}(),Nn=["type","colSpan","testOptions","renderList"],Zn=function(e){var r=e.type,u=e.colSpan,d=e.testOptions,g=e.renderList,o=ee()(e,Nn),i={label:"name",value:"code"},t=(0,h.useState)([]),s=U()(t,2),b=s[0],y=s[1],p=(0,h.useState)((o==null?void 0:o.fieldNames)||S()({},i)),F=U()(p,2),c=F[0],l=F[1],R=function(){var D=se()(X()().mark(function N(){var x,V,L;return X()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return x=[],a.prev=1,a.next=4,je==null?void 0:je({type:r});case 4:if(a.t2=L=a.sent,a.t1=a.t2===null,a.t1){a.next=8;break}a.t1=L===void 0;case 8:if(!a.t1){a.next=12;break}a.t3=void 0,a.next=13;break;case 12:a.t3=L.data;case 13:if(a.t4=V=a.t3,a.t0=a.t4!==null,!a.t0){a.next=17;break}a.t0=V!==void 0;case 17:if(!a.t0){a.next=21;break}a.t5=V,a.next=22;break;case 21:a.t5=[];case 22:x=a.t5,a.next=28;break;case 25:a.prev=25,a.t6=a.catch(1),x=[];case 28:d&&(x=d),y(x);case 30:case"end":return a.stop()}},N,null,[[1,25]])}));return function(){return D.apply(this,arguments)}}(),O=function(){var N;return(0,n.jsx)(n.Fragment,{children:g==null||(N=g.map)===null||N===void 0?void 0:N.call(g,function(x,V){var L=null,j=typeof u=="undefined"?3:u;if(x){var a,T,P=x.type,w=P===void 0?0:P,Z=x.component,I=x.componentProps,f=I===void 0?{}:I,C=x.render,A=x.comRef,k=x.formProps;j=typeof(x==null?void 0:x.colSpan)=="undefined"?j:x==null?void 0:x.colSpan;var B=(a=b==null||(T=b.filter)===null||T===void 0?void 0:T.call(b,function(M){if(M){var K;if(M!=null&&M[(K=c==null?void 0:c.value)!==null&&K!==void 0?K:i.value]){if(Array.isArray(w)){var G;return w==null||(G=w.includes)===null||G===void 0?void 0:G.call(w,M==null?void 0:M.type)}return(M==null?void 0:M.type)===w}return!1}return!1}))!==null&&a!==void 0?a:[],E=Pn(Z!=null?Z:"select",S()(S()({},f),{},{dictOptions:B,fieldNames:c}),A);typeof C=="function"?L=C(E):L=(0,n.jsx)(ye.Z.Item,S()(S()({},k),{},{children:E}))}return(0,n.jsx)(h.Fragment,{children:j===null?L:(0,n.jsx)(de.Z,{span:j,children:L})},V)})})};return(0,h.useEffect)(function(){"fieldNames"in o&&l((o==null?void 0:o.fieldNames)||S()({},i))},[o.fieldNames]),(0,h.useEffect)(function(){R()},[]),(0,n.jsx)(n.Fragment,{children:O()})},Vn=Zn},53649:function(ca,ve,m){m.r(ve)}}]);
