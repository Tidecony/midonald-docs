"use strict";(self.webpackChunkmidonald=self.webpackChunkmidonald||[]).push([[751,649],{76751:function(me,q,t){t.r(q),t.d(q,{DivideAreaTitle:function(){return ve},Download:function(){return Ne},DynamicTable:function(){return be},LinkClick:function(){return Fe},ListQueryForm:function(){return Ie},SearchInput:function(){return Be},TagSelect:function(){return Ge},UploadExcel:function(){return tn}});var rn=t(999),xe=t(57213),S=t.n(xe),ce=t(94935),p=t(50959),e=t(11527),ge=function(n){var i=n.title,l=n.style,r=n.noLine,x=r===void 0?!1:r,s=n.subTitle,v=s===void 0?!1:s;return(0,e.jsxs)(e.Fragment,{children:[v?(0,e.jsxs)("div",{style:S()({position:"relative",height:32,marginBottom:16,paddingLeft:8,borderRadius:4,fontSize:14,lineHeight:"32px",fontWeight:"bold",color:"#222",backgroundColor:"#f6f6f6"},l),children:[(0,e.jsx)("div",{style:{position:"absolute",left:0,top:8,width:4,height:16,borderRadius:"5px 0px 5px 0px",backgroundColor:"#ffbc0d"}}),i]}):(0,e.jsx)("div",{style:S()({fontWeight:"bold",color:"#101010",fontSize:"16px"},l),children:i}),x?null:(0,e.jsx)(ce.Z,{style:{margin:"16px 0",color:"#f1f1f1"}})]})},ve=ge,ye=t(93525),_=t.n(ye),Se=t(54306),O=t.n(Se),B=t(72002),k=t(40352),Ce=t(43026),Te=function(n,i){var l=n.overMax,r=n.overMaxTxt,x=n.columns,s=n.addText,v=n.addType,g=v===void 0?"long":v,T=n.tableOpt,D=T===void 0?{}:T,b=n.dataSource,y=b===void 0?[]:b,j=n.expandNode,F=j===void 0?null:j,U=n.onAdd,N=(0,p.useState)([]),a=O()(N,2),u=a[0],f=a[1],c=(0,p.useState)(0),w=O()(c,2),Z=w[0],V=w[1];(0,p.useEffect)(function(){f(y.map(function(m,P){return m.key=P,m})),V(y.length)},[y]);var o=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(l&&u.length>=l){B.Z.warning("\u8D85\u51FA\u6700\u5927\u53EF\u521B\u5EFA\u6570\u91CF");return}f(function(L){return[].concat(_()(L),[S()({key:Z},P)])}),V(Z+1)},H=function(P){f(function(L){return L.filter(function(h,d){return d!==P})})};(0,p.useImperativeHandle)(i,function(){return{getTableData:function(){return u},handleAddRow:o,handleDeleteRow:H}});var M=function(){return o()};return(0,e.jsxs)(e.Fragment,{children:[g==="button"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{type:"primary",onClick:U||M,style:{marginBottom:16},children:s!=null?s:"+\u65B0\u589E"}),F]}):null,g==="link"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{type:"link",onClick:U||M,style:{marginBottom:16},children:s!=null?s:"+\u65B0\u589E"}),F]}):null,(0,e.jsx)(Ce.Z,S()({columns:x,dataSource:u,pagination:!1},D)),g==="long"?(0,e.jsx)(k.Z,{block:!0,type:"primary",onClick:U||M,style:{marginTop:16},children:s!=null?s:"+\u65B0\u589E"}):null]})},be=p.forwardRef(Te),dn=t(53649),je=function(n){var i=n.classList,l=i===void 0?"":i,r=n.children,x=n.onClick;return(0,e.jsx)("span",{role:"link",tabIndex:0,className:"link-span-click ".concat(l),onClick:function(v){return typeof x=="function"&&x(v)},children:r!=null?r:"/"})},Fe=je,Ze=t(5013),Le=t(10213),Y=t(96420),le=t(44222),Q=t(99059),De=p.forwardRef(function(C,n){var i,l=C.queryBtnText,r=C.resetBtnText,x=C.showFilterText,s=C.hideFilterText,v=C.formItems,g=C.noHide,T=C.onSearch,D=(0,p.useState)(!1),b=O()(D,2),y=b[0],j=b[1],F=(0,p.useRef)(null);(0,p.useImperativeHandle)(n,function(){return{getFormData:function(){var u;return((u=F.current)===null||u===void 0?void 0:u.getFieldsValue())||[]}}});var U=function(u){T(u)},N=function(){j(!y)};return(0,e.jsx)(Y.Z,{ref:F,name:"basic",className:"midonald-search-form",onFinish:U,size:"middle",layout:"vertical",children:(0,e.jsx)("div",{className:"midonald-search-area",children:(0,e.jsxs)(le.Z,{gutter:32,children:[v.showItems.map(function(a,u){var f,c,w;return a.type==="title"?(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsx)(ve,{title:a.title,subTitle:!0,noLine:!0})},u):(0,e.jsx)(Q.Z,{span:(f=a.span)!==null&&f!==void 0?f:3,children:a.type==="slot"?(c=a.render)===null||c===void 0?void 0:c.call(a):(0,e.jsx)(Y.Z.Item,S()(S()({labelCol:{span:6},label:a.label,name:a.name},a.props),{},{children:(w=a.render)===null||w===void 0?void 0:w.call(a)}))},u)}),y&&!g?(0,e.jsx)(e.Fragment,{children:(i=v.hideItems)===null||i===void 0?void 0:i.map(function(a,u){var f,c;return(0,e.jsx)(Q.Z,{span:a.span||3,children:a.type==="slot"?(f=a.render)===null||f===void 0?void 0:f.call(a):(0,e.jsx)(Y.Z.Item,S()(S()({labelCol:{span:6},label:a.label,name:a.name},a.props),{},{children:(c=a.render)===null||c===void 0?void 0:c.call(a)}))},u)})}):null,(0,e.jsxs)(Q.Z,{span:12,children:[(0,e.jsx)(k.Z,{type:"primary",htmlType:"submit",children:l!=null?l:"\u67E5\u8BE2"}),(0,e.jsx)(k.Z,{onClick:function(){var u;(u=F.current)===null||u===void 0||u.resetFields()},children:r!=null?r:"\u91CD\u7F6E"}),!g&&(0,e.jsxs)(k.Z,{type:"link",size:"small",onClick:N,children:[y?"".concat(s!=null?s:"\u9690\u85CF\u67E5\u8BE2\u6761\u4EF6"):"".concat(x!=null?x:"\u5168\u90E8\u67E5\u8BE2\u6761\u4EF6"),y?(0,e.jsx)(Ze.Z,{}):(0,e.jsx)(Le.Z,{})]})]})]})})})}),Ie=De,Re=t(25359),ee=t.n(Re),ke=t(49811),he=t.n(ke),Ue=t(57656),we=(0,Ue.Z)();function Ee(C){return new Promise(function(n,i){C.then(function(l){Object.prototype.toString.call((l==null?void 0:l.data)||{})==="[object Blob]"&&n(l),l.code&&(l.code==="2000"||l.code===2e3||l.code==="SUCCESS")?n(l):i(l)}).catch(function(l){i(l)})})}function Oe(C,n,i,l){var r={url:C,method:"get",params:n!=null?n:null};return r=i?S()(S()({},r),{},{responseType:i}):r,r=l?S()(S()({},r),{},{headers:l}):r,Ee(we(r))}var G=t(60776),Ae=function(n){var i=n.baseUrl,l=i===void 0?"":i,r=n.btnText,x=r===void 0?"\u4E0B\u8F7D":r,s=n.className,v=s===void 0?"":s,g=n.btnType,T=g===void 0?"default":g,D=n.btnSize,b=D===void 0?"small":D,y=n.disabled,j=y===void 0?!1:y,F=n.downloadType,U=F===void 0?"label":F,N=function(){var a=he()(ee()().mark(function u(){var f,c,w,Z;return ee()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log("\u{1F680} ~ file: index.tsx:31 ~ onClick ~ baseUrl:",l),l){o.next=4;break}return B.Z.warn("\u6CA1\u6709\u4E0B\u8F7D\u5730\u5740"),o.abrupt("return");case 4:return c=null,o.prev=5,o.next=8,Oe(l,null,"blob",{version:"1.0","X-Request-System":"COUPON01"});case 8:c=o.sent,console.log("\u{1F680} ~ file: index.tsx:36 ~ onClick ~ res:",c),o.next=17;break;case 12:return o.prev=12,o.t0=o.catch(5),console.log("\u{1F680} ~ file: index.tsx:56 ~ onClick ~ e:",o.t0),B.Z.error((o.t0===null||o.t0===void 0?void 0:o.t0.msg)||(o.t0===null||o.t0===void 0?void 0:o.t0.message)),o.abrupt("return");case 17:(f=c)!==null&&f!==void 0&&f.data?(w=c.data,Z=new FileReader,console.log("\u{1F680} ~ file: index.tsx:48 ~ onClick ~ reader:",Z),Z.readAsDataURL(w),Z.onload=function(){var H=document.createElement("a");H.download="\u6A21\u677F.xlsx",H.href=Z.result,H.click(),H.remove()}):B.Z.success("\u4E0B\u8F7D\u5931\u8D25");case 18:case"end":return o.stop()}},u,null,[[5,12]])}));return function(){return a.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:U==="label"?(0,e.jsx)(k.Z,{size:b,type:T,className:v,disabled:!l||j,children:(0,e.jsx)("a",{download:"",href:"".concat(l,"?authorization=").concat(G.LP===null||G.LP===void 0?void 0:(0,G.LP)()),children:x})}):U==="blob"?(0,e.jsx)(k.Z,{size:b,type:T,onClick:N,className:v,disabled:!l||j,children:x}):null})},Ne=(0,p.memo)(Ae),Pe=t(22382),ze=function(n){var i=n.btnText,l=i===void 0?"\u67E5\u8BE2":i,r=n.inputStyle,x=n.onSearch,s=(0,p.useState)(""),v=O()(s,2),g=v[0],T=v[1],D=function(){x(g)},b=function(j){j.keyCode===13&&D()};return(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,e.jsx)(Pe.Z,{style:S()({marginRight:15},r),allowClear:!0,onKeyUp:b,onChange:function(j){return T(j.target.value)},placeholder:"\u8BF7\u8F93\u5165"}),(0,e.jsx)(k.Z,{type:"primary",htmlType:"submit",onClick:D,children:l})]})},Be=ze,He=t(54689),Me=t.n(He),$e=t(12342),Ve=t.n($e),We=t(17373),ae=t(10422),Ke=["value","newLabelTip","options","getData","setTagValue","placeholder","notFoundContent"],Qe=function(n){var i,l=n.value,r=n.newLabelTip,x=r===void 0?"\u65B0\u6807\u7B7E":r,s=n.options,v=s===void 0?[]:s,g=n.getData,T=g===void 0?function(){return[]}:g,D=n.setTagValue,b=D===void 0?function(){}:D,y=n.placeholder,j=y===void 0?"\u6761\u4EF6tag":y,F=n.notFoundContent,U=F===void 0?"\u65E0\u5339\u914D\u6807\u7B7E":F,N=Ve()(n,Ke),a=(0,p.useState)(""),u=O()(a,2),f=u[0],c=u[1],w=(0,p.useState)(!1),Z=O()(w,2),V=Z[0],o=Z[1],H=(0,p.useState)([]),M=O()(H,2),m=M[0],P=M[1],L=(0,p.useMemo)(function(){return he()(ee()().mark(function h(){var d;return ee()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!(Array.isArray(v)&&v!==null&&v!==void 0&&v.length)){A.next=3;break}return P(_()(v)),A.abrupt("return");case 3:typeof T=="function"&&P((d=T())!==null&&d!==void 0?d:[]);case 4:case"end":return A.stop()}},h)}))},[]);return(0,p.useEffect)(function(){L()},[L]),(0,e.jsx)(We.Z,S()({allowClear:!0,showSearch:!0,open:V,style:{width:"30%"},value:l,placeholder:j,onInputKeyDown:function(d){var I=d.target.value;d.keyCode===13&&I&&f&&(0,ae.unstable_batchedUpdates)(function(){b(I),c(""),o(!1)})},onSearch:function(d){if(!d||d===l){c("");return}if(!(m!=null&&m.length)){c(d);return}var I=!1,A=Me()(m),W;try{for(A.s();!(W=A.n()).done;){var oe=W.value;if(d===oe){I=!0;break}}}catch(ne){A.e(ne)}finally{A.f()}c(I?"":d)},onChange:function(d){b(d),c("")},notFoundContent:!f&&!(m!=null&&m.length)?null:U,dropdownRender:function(d){return(0,e.jsxs)(e.Fragment,{children:[d,f?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ce.Z,{style:{margin:"8px 0"}}),(0,e.jsx)("div",{style:{width:"100%",padding:"0 8px 4px"},role:"link",onClick:function(){(0,ae.unstable_batchedUpdates)(function(){b(f),c(""),o(!1)})},children:"".concat(f,"(").concat(x,")")})]}):null]})},options:m==null||(i=m.map)===null||i===void 0?void 0:i.call(m,function(h){var d,I;return{label:(d=h==null?void 0:h.label)!==null&&d!==void 0?d:h,value:(I=h==null?void 0:h.value)!==null&&I!==void 0?I:h}}),onDropdownVisibleChange:function(d){(0,ae.unstable_batchedUpdates)(function(){c(""),o(d)})},getPopupContainer:function(d){return d.parentElement}},N))},Ge=Qe,Xe=t(68968),Je=t(62777),Ye=t(49294),qe=t(48884),_e=t(26024),en=t(30365),fe=t.n(en),nn=function(n){var i=n.name,l=n.okText,r=n.closeText,x=n.modalTitle,s=n.errorContent,v=n.templateMethod,g=n.templateURL,T=n.errListField,D=n.uploadURL,b=n.btnType,y=b===void 0?"default":b,j=n.paramField,F=n.tooltip,U=n.onSuccess,N=n.onIllegal,a=n.onError,u={labelCol:{span:4},wrapperCol:{span:8}},f=(0,p.useState)(!1),c=O()(f,2),w=c[0],Z=c[1],V=(0,p.useState)(!1),o=O()(V,2),H=o[0],M=o[1],m=(0,p.useState)([]),P=O()(m,2),L=P[0],h=P[1],d=(0,p.useState)([]),I=O()(d,2),A=I[0],W=I[1],oe=(0,p.useState)(!1),ne=O()(oe,2),pe=ne[0],te=ne[1],ie=function(){M(!1),h([]),W([]),te(!1)},ln={onRemove:function(E){var R=L.indexOf(E),$=L.slice();$.splice(R,1),h($)},beforeUpload:function(E){if(!(E.size/1024/1024<50)){B.Z.warning("\u6587\u4EF6\u4E0D\u80FD\u8D85\u8FC750M");return}return E.name.split(".").pop()!=="xls"&&E.name.split(".").pop()!=="xlsx"?(B.Z.warning("\u652F\u6301\u4E0A\u4F20\u683C\u5F0F .xlsx/.xls"),!1):(L.length===0?(h([].concat(_()(L),[E])),W([]),te(!1)):(B.Z.warning("\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6"),h(_()(L)),W([]),te(!1)),!1)}},an=function(){if(A.length&&W([]),L.length===0){B.Z.warning("\u8BF7\u9009\u62E9\u5BFC\u5165\u6587\u4EF6");return}var E=new FormData;L.forEach(function(R){E.append(j||"files",R)}),Z(!0),fe().post(D,E,{headers:{Authorization:(0,G.LP)()}}).then(function(R){if(h([]),Z(!1),R.data.code==="SUCCESS"){var $,K,J,z,re;if(T&&(($=R.data)===null||$===void 0||(K=$.data)===null||K===void 0||(J=K[T])===null||J===void 0?void 0:J.length)>0||T===null&&((z=R.data)===null||z===void 0||(re=z.data)===null||re===void 0?void 0:re.length)>0){var de,se,ue;N==null||N(T?(de=R.data)===null||de===void 0||(se=de.data)===null||se===void 0?void 0:se[T]:(ue=R.data)===null||ue===void 0?void 0:ue.data),te(!0)}else U?U(R.data):B.Z.success("\u5BFC\u5165\u6210\u529F"),ie()}else a==null||a(R.data.msg)}).catch(function(){h([]),Z(!1)})},on=function(){fe().post(g,{},{responseType:"blob",headers:{Authorization:(0,G.LP)(),"Content-Type":"application/json","Cache-Control":"no-cache"}}).then(function(E){if(E.data==0)B.Z.warning("\u6570\u636E\u4E3A\u7A7A\uFF0C\u4E0D\u80FD\u5BFC\u51FA");else{var R=new Blob([E.data],{type:"application/vnd.ms-excel"}),$=E.headers["content-disposition"],K=$?$.match(/(filename=(.*))/):null,J=K&&K[2]?decodeURI(K[2]):"default.xls";if("download"in document.createElement("a")){var z=document.createElement("a");z.download=J,z.style.display="none",z.href=URL.createObjectURL(R),document.body.appendChild(z),z.click(),URL.revokeObjectURL(z.href),document.body.removeChild(z)}else navigator.msSaveBlob&&navigator.msSaveBlob(R,J)}})};return(0,e.jsxs)("div",{style:{display:"inline-block"},children:[(0,e.jsx)(k.Z,{size:"middle",type:y,onClick:function(){M(!0)},children:i}),(0,e.jsx)(Ye.Z,{destroyOnClose:!0,width:373,maskClosable:!1,title:x,onCancel:ie,open:H,footer:[(0,e.jsx)(k.Z,{type:"primary",loading:w,onClick:function(){return an()},children:"\u5BFC\u5165"},"submit"),(0,e.jsx)(k.Z,{onClick:ie,children:"\u5173\u95ED"},"back")],className:"import-modal",children:(0,e.jsxs)(Y.Z,{size:"middle",layout:"vertical",children:[(0,e.jsxs)("p",{className:"upload-tips-info-new",children:[F&&(0,e.jsxs)("span",{style:{fontSize:14,color:"rgb(34, 34, 34)",fontWeight:"bold",display:"block"},children:["\u4E0A\u4F20\u6587\u4EF6",(0,e.jsx)(qe.Z,{title:F,placement:"right",overlayInnerStyle:{fontWeight:"normal"},children:(0,e.jsx)(Je.Z,{style:{marginLeft:4,verticalAlign:"-3px"}})})]}),(0,e.jsx)("span",{className:"upload-format",children:"\u652F\u6301\u4E0A\u4F20\u683C\u5F0F .xlsx/.xls"}),g&&v==="POST"&&(0,e.jsx)("a",{onClick:on,children:"\u4E0B\u8F7D\u6A21\u677F"}),g&&v!=="POST"&&(0,e.jsx)("a",{href:"".concat(g,"?token=").concat((0,G.LP)()),children:"\u4E0B\u8F7D\u6A21\u677F"})]}),(0,e.jsx)(le.Z,{children:(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsx)(Y.Z.Item,S()(S()({},u),{},{className:"upload-key-package-row required-tip",style:{marginBottom:pe?"8px":"20px"},children:(0,e.jsx)(_e.Z,S()(S()({},ln),{},{fileList:L,accept:".xls, .xlsx",children:(0,e.jsx)(k.Z,{icon:(0,e.jsx)(Xe.Z,{}),children:"\u9009\u62E9\u6587\u4EF6"})}))}))})}),pe?(0,e.jsx)("div",{className:"illega-tips-style-box",children:(0,e.jsx)(le.Z,{children:(0,e.jsx)(Q.Z,{span:12,children:(0,e.jsx)("ul",{className:"illega-tips-style",children:s})})})}):""]})})]})},tn=nn},53649:function(me,q,t){t.r(q)}}]);
